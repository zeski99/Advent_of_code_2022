print((lambda A,I: ((lambda A: [[A[i[2]-1].append(A[i[1]-1].pop())for _ in range(i[0])] for i in I]and "".join(map(lambda x: x[-1], A)))([[*a] for a in A]), [A[i[2]-1].extend(A[i[1]-1][-i[0]:]) or [A[i[1]-1].pop() for _ in range(i[0])] for i in I] and "".join(map(lambda x: x[-1], A))))(*(lambda x,y: ((lambda a: [[l[u] for l in a if l[u] != " "][::-1] for u in range(len(a[0]))])([a[1::4] for a in x.split("\n")[:-1]]), [list(map(int, a.split()[1::2])) for a in y.split("\n")]))(*open("in.txt").read().split("\n\n"))))