print((lambda I,a,t,d: (lambda X: (X(2),X(10)))(lambda n: (lambda R,v: [[(R.insert(0, a(R.pop(0),d(i[0])))) or [R.insert(k+1, t(R[k],R.pop(k+1),a))for k in range(n-1)] and v.add(R[-1]) for _ in range(int(i[1]))]for i in I] and len(v))([(0,0) for _ in range(n)], set())))([l.split() for l in open("in.txt").readlines()], lambda x,y: (x[0]+y[0], x[1]+y[1]),lambda h,t,a: (lambda x: t if set(x)<{-1,0,1} else a(t,(round(x[0]*0.6),round(x[1]*0.6))))(a(h, (-t[0],-t[1]))), lambda x:{"R":(1,0),"L":(-1,0),"U":(0,1),"D":(0,-1)}[x]))