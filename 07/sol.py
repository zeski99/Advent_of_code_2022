print((lambda I,D,P,c,l,e,L: [c(i,P) if "cd" in i else "" if "ls" in i else l(i,D,iter(P),l) for i in I] and (s := sum(e(D,e,L))) and (sum(i for i in L if i < 100000), min(i for i in L if s-i < 40000000)))(map(lambda x: x.split(), open("in.txt").readlines()), {}, [], lambda x,P: P.pop() if ".." in x else P.clear() if "/" in x else P.append(x[-1]),lambda x,D,P,l: ((n := next(P, None)) and ((l(x,D[n],P,l)) or 1)) or D.update({x[1]: {} if x[0] == "dir" else int(x[0])}),lambda D,e,L: [v if isinstance(v, int) else (lambda x: L.append(x) or x)(sum(e(v, e, L))) for k,v in D.items()],[]))